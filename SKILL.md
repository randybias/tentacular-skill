---
name: tentacular
description: Use when installing the tntc CLI, configuring target Kubernetes
  environments, generating cluster environment profiles, creating or modifying
  TypeScript DAG workflows, testing workflow nodes, or deploying workflows to a
  cluster. Also use when a workflow is broken, nodes are not passing data, or a
  cluster profile needs refreshing.
---

# Tentacular

Tentacular runs TypeScript DAG workflows in Kubernetes with gVisor sandboxing,
NetworkPolicy egress contracts, and secret isolation. The `tntc` CLI manages the
full lifecycle.

**Find your phase below. Read only the phase file you need.**

Do not assume a phase is complete. Run its gate verification commands to confirm.
Do not skip to a later phase because the task seems straightforward.

## Lifecycle

```
Is tntc installed and working? (run: tntc version)
  NO  → REQUIRED: phases/01-install.md
  YES ↓

Environment(s) configured in ~/.tentacular/config.yaml?
  NO  → REQUIRED: phases/02-configure.md
  YES ↓

Fresh cluster profile for target env? (generatedAt < 7 days)
  NO  → REQUIRED: phases/03-profile.md
  YES ↓

Building or modifying a workflow?
  YES → REQUIRED: phases/04-build.md

Testing or deploying an existing workflow?
  YES → REQUIRED: phases/05-test-and-deploy.md
```

## Directory Structure

```
~/.tentacular/                 # user-level config — applies everywhere
  config.yaml                  # registry, namespace, runtime_class, environments
  envprofiles/                 # generated by tntc — do not hand-edit
    <env>.md
    <env>.json

.tentacular/                   # project-level config — overrides user-level
  config.yaml                  # same schema; only needed for per-project settings
  envprofiles/                 # generated; mirrors ~/.tentacular/envprofiles/

~/workspace/tentacles/         # ALL workflows live here — no exceptions
  <workflow-name>/
    workflow.yaml
    nodes/                     # TypeScript node files
    tests/fixtures/            # test input/output fixtures
    .secrets.yaml              # NEVER commit — fill from .example
    .secrets.yaml.example      # commit this
```

Config resolution: `.tentacular/config.yaml` (project) → `~/.tentacular/config.yaml` (user).
Profile resolution: same order — project-level wins if present.

**NEVER put workflows in `~/.tentacular/` or `.tentacular/`.**
**NEVER commit `.secrets.yaml`.**

## Iron Laws

```
1. tntc must be installed and verified before any other work.
2. A fresh cluster profile must exist before designing any workflow.
3. Every node must receive data, transform it, and return it — no performative nodes, ever.
4. Every node must be individually tested (fixture passing, all authenticated dependencies
   verified working) before the DAG is assembled. The full pipeline must be tested and
   data flow verified before any deploy.
```

Violating any Iron Law means starting that phase over, not patching around it.

## References (load only when needed)

| Topic | File |
|-------|------|
| CLI flags and commands | references/cli.md |
| Contract model and dependencies | references/contract.md |
| Workflow YAML spec | references/workflow-spec.md |
| Node Context API | references/node-development.md |
| Testing fixtures and patterns | references/testing-guide.md |
| Build, deploy, environment config | references/deployment-guide.md |
| Agent planning and E2E cycle | references/agent-workflow.md |
| Performative node definition and data flow | references/node-data-flow.md |
